<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux系统与天文软件包IDL（第二部分） | SDYZZY的摸鱼网站</title><meta name="author" content="SDYZZY"><meta name="copyright" content="SDYZZY"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="这是本学期“Linux系统与天文软件包IDL”课程的笔记。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux系统与天文软件包IDL（第二部分）">
<meta property="og:url" content="https://sdyzzy.github.io/posts/4b93c86f.html">
<meta property="og:site_name" content="SDYZZY的摸鱼网站">
<meta property="og:description" content="这是本学期“Linux系统与天文软件包IDL”课程的笔记。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://sdyzzy.github.io/posts/4b93c86f/linux.svg">
<meta property="article:published_time" content="2022-10-15T17:27:27.363Z">
<meta property="article:modified_time" content="2023-06-30T05:00:00.000Z">
<meta property="article:author" content="SDYZZY">
<meta property="article:tag" content="programming">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sdyzzy.github.io/posts/4b93c86f/linux.svg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://sdyzzy.github.io/posts/4b93c86f.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux系统与天文软件包IDL（第二部分）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-06-30 13:00:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="./css/diyfont.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/background_and_head/head.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> Useful Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/posts/4b93c86f/linux.svg')"><nav id="nav"><span id="blog-info"><a href="/" title="SDYZZY的摸鱼网站"><span class="site-name">SDYZZY的摸鱼网站</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> Useful Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux系统与天文软件包IDL（第二部分）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-15T17:27:27.363Z" title="发表于 2022-10-16 01:27:27">2022-10-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-06-30T05:00:00.000Z" title="更新于 2023-06-30 13:00:00">2023-06-30</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>27分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>[toc]</p>
<h3 id="12-压缩包管理-（p261）"><a href="#12-压缩包管理-（p261）" class="headerlink" title="12.压缩包管理&#x3D;&#x3D;（p261）&#x3D;&#x3D;"></a>12.压缩包管理&#x3D;&#x3D;（p261）&#x3D;&#x3D;</h3><table>
<thead>
<tr>
<th align="center">压缩包类型</th>
<th align="center">命令</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.tar</td>
<td align="center">tar</td>
</tr>
<tr>
<td align="center">.gz</td>
<td align="center">gzip,gunzip</td>
</tr>
<tr>
<td align="center">.bz2</td>
<td align="center">bzip2,bunzip2</td>
</tr>
<tr>
<td align="center">.zip</td>
<td align="center">zip,unzip</td>
</tr>
<tr>
<td align="center">.rar</td>
<td align="center">rar</td>
</tr>
</tbody></table>
<ul>
<li><p>两个基本概念：</p>
<ul>
<li><p><strong>打包</strong>：归档文件（archive file），文件没有经过压缩，它所使用的磁盘空间是其中所有文件和目录的总和；</p>
</li>
<li><p><strong>压缩</strong>：压缩文件（compressed file），占用磁盘空间减少；</p>
<ul>
<li>有损压缩：压缩率比较高，常见的声音、图像、视频压缩基本都是有损的，如：mpeg2，mpeg4，mp3；</li>
<li>无损压缩：压缩率降低，数据、文档等等需要保持完全一致的内容。</li>
</ul>
</li>
</ul>
</li>
<li><p>打包并压缩命令tar：（掌握，p266）</p>
<p><code>tar [-cvxzjf] 压缩后新生成的文件名 被压缩文件</code>：将多个文件打包并压缩为一个压缩文件，可以打包目录；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参数：</span></span><br><span class="line">tar -c  # create，建立压缩文件</span><br><span class="line">tar -v  # visual，压缩过程中显示文件名</span><br><span class="line">tar -x  # extract，解压缩</span><br><span class="line">tar -z  # 是否同时具有gzip的属性，就是同时以gzip压缩,此时文件名最好命名为*.tar.gz</span><br><span class="line">tar -j  # 是否同时具有bzip2的属性，就是同时以bzip2压缩,此时文件名最好命名为*.tar.bz2</span><br><span class="line">tar -f  # 使用文件名</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % tar -cf f1.tar file1 file2  # 压缩,但是不显示被压缩文件</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % tar -cvf f2.tar file1 file2   # 压缩,同时显示被压缩文件</span><br><span class="line">a file1</span><br><span class="line">a file2</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % tar -cvzf f3.tar.gz file1 file2  # 同时以gzip压缩</span><br><span class="line">a file1</span><br><span class="line">a file2</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % tar -cvjf f4.tar.bz2 file1 file2  # 同时bzip2压缩</span><br><span class="line">a file1</span><br><span class="line">a file2</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">f1.tar		f3.tar.gz	file2		file5</span><br><span class="line">f2.tar		f4.tar.bz2	file3		filedir</span><br><span class="line">f3.tar		file1		file4</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % tar -xvf f4.tar.bz2  # 解压缩并显示文件名</span><br><span class="line">x file1</span><br><span class="line">x file2</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % cp f4.tar.bz2 ../  # 移动文件</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % cd ..  # 切换目录</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % ls  # 显示此时目录下的文件</span><br><span class="line">Desktop				f4.tar.bz2</span><br><span class="line">Documents			gw</span><br><span class="line">Downloads			opt</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % tar -xvf f4.tar.bz2  # 解压缩并显示文件名</span><br><span class="line">x file1</span><br><span class="line">x file2</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % ls  # 显示此时目录下的文件</span><br><span class="line">Desktop				file1</span><br><span class="line">Documents			file2</span><br><span class="line">Downloads			gw</span><br><span class="line">f4.tar.bz2			opt</span><br></pre></td></tr></table></figure>
</li>
<li><p>压缩命令.gz：（掌握，p263）</p>
<p><code>gzip [-cdtv] [-r] 待压缩文件名</code>：默认情况下会直接将源文件压缩为<code>.gz</code>后缀的文件，源文件就不存在了（对比：.tar方法源文件还在）。同时压缩多个文件后，得到的仍然是多个压缩文件，而不是一个大的压缩包（即没有打包归档。若想归档可以用前面的tar命令）；</p>
<p><code>gunzip 待压缩文件名</code>：将<code>.gz</code>文件解压缩，也有<code>-r</code>参数；</p>
<p>参数：</p>
<ul>
<li><code>-r</code>：递归处理，将指定目录下的所有文件（包括子目录内的）进行压缩，但是目录本身不变。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % gzip file1</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls        # 源文件不存在了</span><br><span class="line">file1.gz	file2	file3	file4	file5	filedir</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % gunzip file1.gz  # 解压缩</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">file1	file2	file3	file4	file5	filedir</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % gzip file1 file2  # 多个文件只压缩不归档</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">file1.gz	file3		file5</span><br><span class="line">file2.gz	file4		filedir</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % gunzip *.gz  # 利用通配符解压缩大量文件</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">file1	file2	file3	file4	file5	filedir</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % gzip filedir  # 不能直接压缩目录</span><br><span class="line">gzip: filedir is a directory</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % cd ./filedir  # 在目录下建几个文件</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % touch f1   </span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % touch f2</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % cd ../</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % gzip -r filedir  # 压缩目录内部的文件（但是目录本身不被压缩）</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % cd ./filedir</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % ls</span><br><span class="line">f1.gz	f2.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>压缩命令.bz2（掌握）：</p>
<p><code>bzip2、bunzip2</code>：命令与.gz完全相同。</p>
</li>
<li><p>压缩命令.zip：<br><code>zip [参数] 压缩后新生成的文件名 被压缩文件名</code>：创建<code>.zip</code>后缀的压缩文件；</p>
<p><code>unzip 文件名</code>：解压缩，生成同名目录（子目录内部的压缩文件也解压缩了）；</p>
<p>参数：</p>
<ul>
<li><code>-r</code>：递归处理，将指定目录下的所有文件（包括子目录内的）进行压缩，但是目录本身不变；</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls                        </span><br><span class="line">file1		file3		file5		filedir.tar</span><br><span class="line">file2		file4		filedir		test</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % zip -r filedir.zip filedir  # 建立压缩文件</span><br><span class="line">  adding: filedir/ (stored 0%)</span><br><span class="line">  adding: filedir/.DS_Store (deflated 93%)</span><br><span class="line">  adding: filedir/file/ (stored 0%)</span><br><span class="line">  adding: filedir/file/f2 (stored 0%)</span><br><span class="line">  adding: filedir/file/f1 (stored 0%)</span><br><span class="line">  adding: filedir/f2 (stored 0%)</span><br><span class="line">  adding: filedir/.DS_Store.gz (stored 0%)</span><br><span class="line">  adding: filedir/f1 (stored 0%)</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">file1		file3		file5		filedir.tar		test</span><br><span class="line">file2		file4		filedir		filedir.zip</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % mv filedir.zip ./test  # 移动该压缩文件至test</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % cd test</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro test % ls</span><br><span class="line">filedir.zip</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro test % unzip filedir.zip  # 解压缩</span><br><span class="line">Archive:  filedir.zip</span><br><span class="line">   creating: filedir/</span><br><span class="line">  inflating: filedir/.DS_Store       </span><br><span class="line">   creating: filedir/file/</span><br><span class="line"> extracting: filedir/file/f2         </span><br><span class="line"> extracting: filedir/file/f1         </span><br><span class="line"> extracting: filedir/f2              </span><br><span class="line"> extracting: filedir/.DS_Store.gz    </span><br><span class="line"> extracting: filedir/f1              </span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro test % ls     # 解压缩后生成了同名目录</span><br><span class="line">filedir		filedir.zip</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro test % cd filedir</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % ls  # 子目录的文件也解压缩了</span><br><span class="line">f1	f2	file</span><br></pre></td></tr></table></figure>
</li>
<li><p>压缩命令.rar：</p>
<p><code>rar a 被压缩文件名</code>：压缩指定文件；</p>
<p><code>rar a –r 被压缩目录名</code>：压缩指定目录；</p>
<p><code>rar x 文件名</code>：解压。<img src="./4b93c86f/image-20221016004228490.png" alt="image-20221016004228490" style="zoom:50%;" /></p>
<img src="./4b93c86f/image-20221016004237128.png" alt="image-20221016004237128" style="zoom:45%;" /></li>
</ul>
<h3 id="13-任务管理-p500"><a href="#13-任务管理-p500" class="headerlink" title="13.任务管理&#x3D;&#x3D;(p500)&#x3D;&#x3D;"></a>13.任务管理&#x3D;&#x3D;(p500)&#x3D;&#x3D;</h3><ul>
<li><p>单次任务：</p>
<ul>
<li><p>编辑任务：<code>[sudo] at</code>；</p>
</li>
<li><p>查询任务：<code>[sudo] atq</code>；</p>
</li>
<li><p>删除任务：<code>[sudo] atrm</code>；</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % date     # 查看系统当前时间</span><br><span class="line">2022年10月16日 星期日 00时46分06秒 CST</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % atq      # 查询目前任务，发现没有</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % at 1:00  # 创建一个在1:00执行的单次任务</span><br><span class="line"><span class="meta prompt_">at&gt; </span><span class="language-bash"><span class="built_in">touch</span> testat.md        <span class="comment"># 该任务是建立一个md文档</span></span></span><br><span class="line"><span class="meta prompt_">at&gt; </span><span class="language-bash">&lt;EOF&gt;                  <span class="comment"># 按control + D退出</span></span></span><br><span class="line">job 1 at Sun Oct 16 01:00:00 2022</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % atq      # 查询当前任务，发现有一个</span><br><span class="line">1	Sun Oct 16 01:00:00 2022</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % atq 1    # 查询任务1</span><br><span class="line">1	Sun Oct 16 01:00:00 2022</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % atrm 1   # 删除任务1</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % atq      # 查询目前任务，发现没有了</span><br><span class="line"></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % sudo at 1:02  # 超级用户才能执行的任务要用sudo执行</span><br><span class="line">Password:</span><br><span class="line"><span class="meta prompt_">at&gt; </span><span class="language-bash"><span class="built_in">touch</span> testat.md</span></span><br><span class="line"><span class="meta prompt_">at&gt; </span><span class="language-bash">&lt;EOF&gt;</span></span><br><span class="line">job 2 at Sun Oct 16 01:02:00 2022</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % atq</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % sudo atq      # sudo创建的任务也要sudo atq才能查询</span><br><span class="line">2	Sun Oct 16 01:02:00 2022</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % sudo atrm 2   # sudo创建的任务也要sudo atrm才能删除</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro filedir % sudo atq</span><br></pre></td></tr></table></figure>
</li>
<li><p>周期任务：</p>
<ul>
<li><p>编辑任务：<code>crontab -e</code>，进入当前用户的工作表编辑，是常见的vim界面，</p>
<ul>
<li>每行是一条命令，命令的构成为时间+动作；</li>
<li>时间有：分、时、日、月、周五种；</li>
<li>操作符有：<code>*</code>，取值范围内的所有数字；<code>/n</code>，每过n个单位时间间隔；<code>-</code>，从X到Z；<code>,</code>，散列数字；</li>
</ul>
</li>
<li><p>查询任务：<code>crontab -l</code>；</p>
</li>
<li><p>删除任务：<code>crontab -r</code>；</p>
</li>
<li><p>&#x3D;&#x3D;&#x2F;etc&#x2F;init.d&#x2F;cron stsrt | stop | restart | status(第五章——基本命令_4 ppt16)&#x3D;&#x3D;</p>
<p>Restarting periodic command scheduler crond：重新启动周期任务调度程序crond</p>
</li>
</ul>
<img src="./4b93c86f/image-20221016005304664.png" alt="image-20221016005304664" style="zoom:35%;" />

<img src="./4b93c86f/image-20221016005317293.png" alt="image-20221016005317293" style="zoom:35%;" />

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">3,15 8-11 */2 * * myCommand  # 每隔两天的上午8点到11点的第3和第15分钟执行</span><br></pre></td></tr></table></figure>

<img src="./4b93c86f/image-20221016005329107.png" alt="image-20221016005329107" style="zoom:40%;" />

<img src="./4b93c86f/image-20221016005341931.png" alt="image-20221016005341931" style="zoom:40%;" />

<img src="./4b93c86f/image-20221016005351993.png" alt="image-20221016005351993" style="zoom:40%;" /></li>
</ul>
<h2 id="第六章·Shell脚本及应用"><a href="#第六章·Shell脚本及应用" class="headerlink" title="第六章·Shell脚本及应用"></a>第六章·Shell脚本及应用</h2><h3 id="1-vim简介-p291"><a href="#1-vim简介-p291" class="headerlink" title="1.vim简介&#x3D;&#x3D;(p291)&#x3D;&#x3D;"></a>1.vim简介&#x3D;&#x3D;(p291)&#x3D;&#x3D;</h3><p>vim下有四种操作模式：Normal Mode、Insert Mode、Visual Mode、Ed Mode；</p>
<ul>
<li><p><strong>Normal Mode(默认模式)：</strong>输入<code>vim 文件名</code>之后进入的默认模式；</p>
<p><code>左/右/上/下键</code>：光标向左右上下移动；</p>
<p><code>数字+左/右/上/下键</code>：光标向左右上下移动数字指定的<strong>行&#x2F;列</strong>数；</p>
<p><code>0</code>：光标移动到这一行的<strong>最前面</strong>字符处；</p>
<p><code>$</code>：光标移动到这一行的<strong>最后面</strong>字符处；</p>
<p><code>dd</code>：删除光标所在的那一整行；</p>
<p><code>ndd</code>：n为数字，从光标位置开始，删除向下n行；</p>
<p><code>/str</code>：从光标之后开始搜索字符串str，按<code>n</code>向下重复该查找，按<code>N</code>向上重复该查找；</p>
<ul>
<li>vim可以跟<strong>多个文件名</strong>，例如<code>vim f1 f2 f3</code>。在Ed Mode下<code>:n</code>看下一个文件，<code>:N</code>看上一个文件，<code>:files</code>列出当前vim打开的所有文件；</li>
</ul>
</li>
<li><p><strong>Insert Mode（插入模式）：</strong>在默认模式下，按<code>i</code>进入插入模式，在光标所在处开始输入；按<code>ESC</code>退出insert mode，返回normal mode；</p>
</li>
<li><p><strong>Ed Mode（命令行模式）：</strong>在默认模式下，输入冒号<code>:</code>进入命令行模式；</p>
<p><code>:w</code>：write，将数据写入硬盘文件中；</p>
<p><code>:w [文件名]</code>：将数据另存为指定文件名的文件；</p>
<p><code>:n1,n2 w [文件名]</code>：将n1到n2行的内容写入新的文件中；</p>
<p><code>:q</code>：quit，退出；</p>
<p><code>:q!</code>：强制退出，且不保存修改；</p>
<p><code>:s</code>：search，搜索并<strong>替换</strong>；</p>
<ul>
<li><p><code>:s/str1/str2</code>：替换当前行的第一个str1为str2；</p>
</li>
<li><p><code>:s/str1/str2/g</code>：替换当前行的所有str1为str2；</p>
</li>
<li><p><code>:n,$ s/str1/str2</code>：替换从第n行开始到最后一行（$）中每一行的第一个str1为str2；</p>
</li>
<li><p><code>:n,$ s/str1/str2/g</code>：替换从第n行开始到最后一行（$）中每一行的所有str1为str2；</p>
<p>若n为<code>.</code>则表示从当前行开始；</p>
<p><code>:% s/str1/str2/</code>：等同于<code>:g/str1/s//str2/</code>，替换每一行的第一个str1为str2；</p>
<p><code>:% s/str1/str2/g</code>：等同于<code>:g/str1/s//str2/g</code>，替换每一行中所有str1为str2；</p>
</li>
</ul>
</li>
<li><p><strong>Visual Mode（可视化模式）：</strong>按<code>Ctrl+v</code>进入可视化模式，用于处理指定的列；移动上下左右键选定内容，按<code>x</code>删除选定内容，按<code>q</code>退出。</p>
</li>
<li><p><strong>vim配置文件(p304)：</strong>通常在<code>/usr/share/vim/vimrc</code>或<code>/etc/vim/vimrc</code>；</p>
<ul>
<li><p><code>syntax on</code>：根据程序相关语法显示不同颜色；</p>
</li>
<li><p><code>set autoindent</code>：设置自动缩进，按回车后新行与上一行自动对齐；</p>
</li>
<li><p><code>set tabstop=[n]</code> ：设置tab键缩进量，n为数字，描述缩进n列；</p>
</li>
<li><p><code>set nu</code>：设置行号；取消行号用<code>set nonu</code>；</p>
</li>
<li><p><code>‘0</code>：回到上次关闭该文件时光标的位置；也可以在vimrc添加：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">au BufReadPost * if line(&quot;&#x27;\&quot;&quot;) &gt; 0|if line(&quot;&#x27;\&quot;&quot;) &lt;= line(&quot;$&quot;)|exe(&quot;norm &#x27;\&quot;&quot;)|else|exe &quot;norm $&quot;|endif|endif</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<img src="/posts/4b93c86f/image-20221020151810082.png" class="" title="image-20221020151810082">

<h3 id="2-Shell基础设置"><a href="#2-Shell基础设置" class="headerlink" title="2.Shell基础设置"></a>2.Shell基础设置</h3><p>Shell是包在内核上的壳，是一个<strong>命令解释器</strong>，直接作用于内核。</p>
<table>
<thead>
<tr>
<th align="center">内容</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Shell命令</td>
</tr>
<tr>
<td align="center">Shell的命令集成</td>
</tr>
<tr>
<td align="center">Shell的配置文件</td>
</tr>
<tr>
<td align="center">Shell用户环境设定</td>
</tr>
<tr>
<td align="center">Shell程序的控制结构</td>
</tr>
<tr>
<td align="center">Shell脚本使用</td>
</tr>
</tbody></table>
<img src="./4b93c86f/image-20221020152124096.png" alt="image-20221020152124096" style="zoom:40%;" />

<img src="./4b93c86f/image-20221020152136557.png" alt="image-20221020152136557" style="zoom:40%;" />

<img src="./4b93c86f/image-20221020152554376.png" alt="image-20221020152554376" style="zoom:40%;" />

<img src="./4b93c86f/image-20221020160030621.png" alt="image-20221020160030621" style="zoom:40%;" />

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % cat /etc/passwd  # 查看用户使用的shell类型</span><br><span class="line"></span><br><span class="line">nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false  # 上图ywang</span><br><span class="line">root:*:0:0:System Administrator:/var/root:/bin/sh</span><br><span class="line">daemon:*:1:1:System Services:/var/root:/usr/bin/false</span><br><span class="line">_uucp:*:4:4:Unix to Unix Copy Protocol:/var/spool/uucp:/usr/sbin/uucico</span><br><span class="line">_taskgated:*:13:13:Task Gate Daemon:/var/empty:/usr/bin/false</span><br><span class="line">_networkd:*:24:24:Network Services:/var/networkd:/usr/bin/false</span><br><span class="line">_installassistant:*:25:25:Install Assistant:/var/empty:/usr/bin/false</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>bash与cshell不兼容；</strong></p>
</li>
<li><p>更改用户shell：更改&#x2F;etc&#x2F;passwd文件，<code>usermod –s [shell] [user]</code>&#x3D;&#x3D;(p433)&#x3D;&#x3D;。</p>
</li>
<li><p>查看已安装的Shell解释器：&#x3D;&#x3D;(p313)&#x3D;&#x3D;<code>cat /etc/shells</code>；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % cat /etc/shells  # 查看已经安装的Shell解释器</span><br><span class="line">/bin/bash  # 安装的Shell及路径</span><br><span class="line">/bin/csh</span><br><span class="line">/bin/dash</span><br><span class="line">/bin/ksh</span><br><span class="line">/bin/sh</span><br><span class="line">/bin/tcsh</span><br><span class="line">/bin/zsh</span><br></pre></td></tr></table></figure>
</li>
<li><p>Bash配置文件：系统级的配置文件存储在<code>/etc/profile</code>、<code>/etc/bashrc</code>及<code>/etc/profile.d</code>；</p>
<ul>
<li><p><code>.bash_history</code>&#x3D;&#x3D;(p341)&#x3D;&#x3D;：记录命令历史记录；</p>
</li>
<li><p><code>.bash_logout</code>&#x3D;&#x3D;(p341)&#x3D;&#x3D;：退出Shell时要执行的命令；</p>
</li>
<li><p><code>.bash_profile</code>&#x3D;&#x3D;(p340)&#x3D;&#x3D;：登入Shell时要执行的命令，只在会话开始时被读取一次；</p>
</li>
<li><p><code>.bashrc</code>&#x3D;&#x3D;(p341)&#x3D;&#x3D;：每次打开新的Shell时要执行的命令，别名和函数通常放在该文件中；</p>
</li>
<li><p><code>source [filename]</code>&#x3D;&#x3D;(p341)&#x3D;&#x3D;：执行刚修改的文件，使之立即生效，而不必注销并重新登录。</p>
</li>
</ul>
</li>
</ul>
<h3 id="3-命令补充"><a href="#3-命令补充" class="headerlink" title="3.命令补充"></a>3.命令补充</h3><ul>
<li><p>tab：补全目录或命令；</p>
</li>
<li><p>多命令执行&#x3D;&#x3D;(p348)&#x3D;&#x3D;：</p>
<ul>
<li><p><code>;</code>：<code>command1;command2</code>：先执行command1，不管command1是否出错，继续执行command2，用于程序之间<strong>没有依赖</strong>关系；</p>
</li>
<li><p><code>&amp;&amp;</code>：<code>command1 &amp;&amp; command2</code>：只有command1正确运行完毕，才执行command2，用于<strong>有依赖</strong>关系的程序之间。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">cd /$&#123;解压路径&#125; &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make install</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>命令替换：<code>command1 $(command2)</code>或command1 `command2`，注意`是前引号。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">vim $(locate main.f)  # 用vim操作locate命令运行的结果，即先用locate打开当前目录下所有的main.f文件，然后用vim打开；</span><br><span class="line">vim `locate main.f`  # 同上</span><br><span class="line">echo $(PATH)</span><br></pre></td></tr></table></figure>

<img src="./4b93c86f/image-20221020163234285.png" alt="image-20221020163234285" style="zoom:25%;" />
</li>
<li><p><strong>命令延伸：</strong>一行命令太多，可以用<code>\</code>来延伸至下一行继续书写；在脚本中，如果一行命令太长，同样可以用<code>\</code>进行连接；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % l\</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">s</span></span><br><span class="line">file1		file3		file5		filedir.tar</span><br><span class="line">file2		file4		filedir		test</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % pw\</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">d</span></span><br><span class="line">/Users/sdyzzy/study</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>通配符&#x3D;&#x3D;(p344)&#x3D;&#x3D;：</strong></p>
<ul>
<li><code>*</code>：匹配任意多个任意字符；</li>
<li><code>?</code>：匹配任意单个字符（相当于定位符）；</li>
<li><code>[…或-或!]</code>：按照范围匹配<strong>单个</strong>字符。可以用<code>-</code>给定数字或字母区间（如[1-9]，[a-c]），也可以用列表<code>...</code>直接罗列（如[123]，[acg]）；若加上逻辑非<code>!</code>或者<code>^</code>，则表示非该字符的（含!的要用中括号括起来，例如[!6]，[!23]，[^6]，[^23]）；</li>
<li>每对中括号<code>[]</code>和<code>?</code>都只代表<strong>一个字符</strong>；</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">rm *.bak       # 所有以.bak结尾的文件</span><br><span class="line">rm [!6]*       # 所有不是6开头的文件</span><br><span class="line">rm *[!6].bak   # 所有以.bak结尾，并且点号之前不为6的文件</span><br><span class="line">ls *.????      # 所有点号后有四个字符的文件</span><br><span class="line">rm *[!6]?.*    # 所有点号前倒数第二个字符不为6的文件</span><br><span class="line">ls [13]*       # 所有以1或3开头的文件(默认)</span><br><span class="line">ls [1][3]*     # 所有以13开头的文件</span><br><span class="line">ls [3-8]*      # 所有以3~8之间某个数字开头的文件</span><br><span class="line">ls [a-d,x,y]*  # 所有以a,b,c,d,x,y开头的文件</span><br><span class="line"></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">file1	file2	file3	file4	file5	test	filed	filedir</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % rm -r filed*</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">file1	file2	file3	file4	file5	test</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">f1	f2	f3	file1	file2	file3	test</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % rm file[1-3]</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">f1	f2	f3	test</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % rm ??</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">test</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % touch f1 f2 f3 file1 file2 file3</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % rm ????[12]</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">f1	f2	f3	file3	test</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % touch file1 file2 file3 file12</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % rm ????[1][2]</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls</span><br><span class="line">f1	f2	f3	file1	file2	file3	test</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>管道命令</strong>&#x3D;&#x3D;(p350)&#x3D;&#x3D;：由管道符号<code>|</code>来标识；</p>
<p><code>command1 | command2 | command3 | …</code>：将第一个命令运行的结果作为第二个命令的输入，第二个命令运行的结果作为第三个命令的输入，依此类推；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例如</span></span><br><span class="line">ps aux | more  # 分屏显示ps aux命令的执行结果</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>cut&#x3D;&#x3D;(P351)&#x3D;&#x3D;：</strong>用于将<strong>每个输入行</strong>数据根据指定的字符进行分割；</p>
<p><code>cut –d &quot;分割标识符&quot; -fN</code>：按分割标识符分割管道命令传入的数据，并取第N分区（N从1开始）；</p>
<p><code>cut -d &quot;分割标识符&quot; -fN 文件路径</code>：按分割标识符直接分割指定文件，并取出第N个分区；</p>
<p><code>cut -cN1-N2</code>：取出该行的第N1-N2个字符；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo $PATH</span><br><span class="line">/Users/sdyzzy/opt/anaconda3/bin:/Users/sdyzzy/opt/anaconda3/condabin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/mysql/bin</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo $PATH | cut -d &quot;:&quot; -f1  # 按照:分割，然后取出第1个分区的内容</span><br><span class="line">/Users/sdyzzy/opt/anaconda3/bin</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo $PATH | cut -d &quot;:&quot; -f2  # 按照:分割，然后取出第2个分区的内容</span><br><span class="line">/Users/sdyzzy/opt/anaconda3/condabin</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo $PATH | cut -c7-12  # 取出第7-12个字符</span><br><span class="line">/sdyzz</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>sort&#x3D;&#x3D;(P353)&#x3D;&#x3D;：</strong>用于将数据排序，<code>sort -nru</code>；</p>
<p>参数：</p>
<ul>
<li><p>不加任何参数时，默认根据字母升序a-z；</p>
</li>
<li><p><code>-n</code>：根据数字排序；</p>
</li>
<li><p><code>-r</code>：反向排序（默认递增）；</p>
</li>
<li><p><code>-u</code>：重复出现的行，只列出一次；</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">cat /etc/passwd | sort  # 将列出来的个人帐号排序</span><br><span class="line">cat /etc/passwd | cut -d &quot;:&quot; -f3 | sort -n  # 以用户ID排序</span><br><span class="line">cut -d &quot;:&quot; -f1 /etc/passwd | sort  # 将/etc/passwd文件的每一行按照:分割并取出各行的第1分区，然后排序</span><br></pre></td></tr></table></figure>

<img src="./4b93c86f/image-20221110211424067.png" alt="image-20221110211424067" style="zoom:40%;" /></li>
</ul>
</li>
<li><p>**输入、输出重定向&#x3D;&#x3D;(p345)&#x3D;&#x3D;**：<code>&gt;</code>、<code>&gt;&gt;</code>输出，<code>&lt;</code>、<code>&lt;&lt;</code>读入；</p>
<ul>
<li><code>command &gt; file</code>：把command命令的输出重定向到文件file中，如果file已经存在，则清空原有文件内容再输出；</li>
<li><code>command &gt;&gt; file</code>：把command命令的输出重定向到文件file中，如果file已经存在，则把信息附加在原有文件后面；</li>
<li><code>command &lt; file</code>：从file读入信息作为command命令的输入；</li>
<li><code>command &lt;&lt; C</code>：使command命令读入直到字符C终止；</li>
<li><code>command &lt; file1 &gt; file2</code>：从file1读入信息作为command命令的输入，然后将执行结果输出到file2。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % ls -l &gt; file1</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % vim file1</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r--  1 sdyzzy  staff    0 10 20 16:52 f1</span><br><span class="line">-rw-r--r--  1 sdyzzy  staff    0 10 20 16:52 f2</span><br><span class="line">-rw-r--r--  1 sdyzzy  staff    0 10 20 17:06 file1</span><br><span class="line">-rw-r--r--  1 sdyzzy  staff    0 10 20 16:54 file2</span><br><span class="line">drwxr-xr-x  5 sdyzzy  staff  160 10 17 19:45 test</span><br><span class="line">~                                                                               </span><br><span class="line">~                                                                                                                                                                                                                                            </span><br><span class="line">&quot;file1&quot; 8L, 355B</span><br><span class="line"></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % cat &gt; catfile &lt;&lt;&quot;eof&quot;  # 输入至catfile，遇到&quot;eof&quot;就停止</span><br><span class="line"><span class="meta prompt_">heredoc&gt; </span><span class="language-bash">this is a file</span></span><br><span class="line"><span class="meta prompt_">heredoc&gt; </span><span class="language-bash">ok, <span class="built_in">let</span><span class="string">&#x27;s stop</span></span></span><br><span class="line"><span class="meta prompt_">heredoc&gt; </span><span class="language-bash"><span class="string">eof</span></span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % vim catfile</span><br><span class="line">~</span><br><span class="line">this is a file</span><br><span class="line">ok, let&#x27;s stop                                                                        </span><br><span class="line">~                                                                               </span><br><span class="line">~                                                                               </span><br><span class="line">&quot;catfile&quot; 2L, 30B</span><br><span class="line">sdyzzy@SDYZZY-MacBook-Pro study % cat &lt; catfile</span><br><span class="line">this is a file</span><br><span class="line">ok, let&#x27;s stop</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>成组命令：</strong>以花括号<code>&#123;&#125;</code>括起来的全部命令可视为语法上的一条命令，出现在管道符的一边（<strong>注意左括号“{”后面有一个空格，右括号“}”之前有一个分号“;”</strong>）；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">&#123; echo “User Report for `date`.”;who; &#125; | pr</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">等价于三个语句的组合<span class="built_in">echo</span>、<span class="built_in">who</span>、<span class="built_in">pr</span></span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % echo “User Report for `date`.”  # 单独data命令</span><br><span class="line">“User Report for 2022年10月20日 星期四 21时07分19秒 CST.”</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % who                             # 单独who命令</span><br><span class="line">sdyzzy   console  Oct 15 08:48 </span><br><span class="line">sdyzzy   ttys000  Oct 20 20:50 </span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % echo “User Report for `date`.”;who;  # </span><br><span class="line">“User Report for 2022年10月20日 星期四 21时07分33秒 CST.”</span><br><span class="line">sdyzzy   console  Oct 15 08:48 </span><br><span class="line">sdyzzy   ttys000  Oct 20 20:50 </span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % &#123; echo “User Report for `date`.”;who; &#125; | pr</span><br><span class="line"></span><br><span class="line">10 20 21:07 2022  Page 1</span><br><span class="line"></span><br><span class="line">“User Report for 2022年10月20日 星期四 21时07分39秒 CST.”</span><br><span class="line">sdyzzy   console  Oct 15 08:48 </span><br><span class="line">sdyzzy   ttys000  Oct 20 20:50 </span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>执行历史命令&#x3D;&#x3D;(p335)&#x3D;&#x3D;：</strong>执行历史命令是命令替换之一，它以字符<code>!</code>开头、后随1个或多个字符来定义用户所需的某种类型的历史命令：</p>
<ul>
<li><code>!!</code>：重复上一条命令，也就是<code>!-1</code>；</li>
<li><code>!-n</code>：重新执行倒数第n条历史命令，<code>!-1</code>就等于<code>!!</code>；</li>
<li><code>!string</code>：重新执行以字符串string开头的最近的历史命令行；</li>
<li><code>!?string?</code>：重新执行最近的、包含字符串string的那条历史命令； </li>
<li><code>!#</code>：到现在为止所输入的整个命令行；</li>
<li>前面的<code>history</code>命令。</li>
</ul>
</li>
<li><p><strong>查找命令所在路径：</strong></p>
<p><code>which 命令名</code>：到环境变量PATH里面去遍历查找命令所在的路径目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % which ls</span><br><span class="line">/bin/ls</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % which activate</span><br><span class="line">/Users/sdyzzy/opt/anaconda3/bin/activate</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>命令别名：</strong>&#x3D;&#x3D;(p334)&#x3D;&#x3D;</p>
<p><code>alias 命令别名=命令名</code>：对可执行命令起别名；</p>
<p><code>unalias 命令别名</code>：取消alias设置的命令别名。</p>
<p><strong>注意</strong>：如果命令中有<strong>空格</strong>，命令要用单引号括起来，如：<code>alias llss=‘ls -l’</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % alias llss=ls</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % llss</span><br><span class="line">Desktop				Music</span><br><span class="line">Documents			Pictures</span><br><span class="line">Downloads			Public</span><br><span class="line">Library				test.rtf</span><br><span class="line">Movies				test1</span><br><span class="line">杂	  		       test2</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % unalias llss</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % llss</span><br><span class="line">zsh: command not found: llss</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="4-Shell脚本简介"><a href="#4-Shell脚本简介" class="headerlink" title="4.Shell脚本简介"></a>4.Shell脚本简介</h3><ul>
<li><p>Shell脚本的特点及用途：&#x3D;&#x3D;(p388)&#x3D;&#x3D;</p>
<ul>
<li>Shell脚本可认为是将shell命令按控制结构组织到一个文本文件中，批量交给shell执行；</li>
<li>不同的Shell解释器使用不同的shell命令语法；</li>
<li>Shell脚本直接终端下解释执行，不用生成可执行的二进制文件；</li>
<li>帮助用户完成特定的任务，提高使用、维护系统的效率；</li>
<li>了解Shell脚本可以更好的配置和使用linux；</li>
</ul>
</li>
<li><p>脚本编译和运行过程：</p>
<ul>
<li>一般步骤：编辑文件、保存文件、赋予文件可执行权限、运行及排错；</li>
<li>常用命令：<code>vi</code>（编辑、保存文件）、<code>ls -l</code>（查看文件权限）、<code>chmod</code>（改变程序执行权限）、直接键入文件名运行文件；</li>
</ul>
</li>
<li><p>养成良好的脚本书写习惯：&#x3D;&#x3D;(p391)&#x3D;&#x3D;</p>
<ul>
<li><p>先声明适用哪种shell；</p>
</li>
<li><p>注明脚本的功能、版本信息、作者、文件创建日期等；</p>
</li>
<li><p>每一个大步骤的主要功能；</p>
</li>
<li><p>最好加后缀.sh，以便他人识别；</p>
</li>
<li><p>用vim写代码<strong>不要从第一列开始</strong>，要留出几列用于注释等；</p>
<img src="./4b93c86f/image-20221027150836614.png" alt="image-20221027150836614" style="zoom:50%;" /></li>
</ul>
</li>
<li><p><strong>脚本执行方法：</strong>&#x3D;&#x3D;(p394)&#x3D;&#x3D;</p>
<ul>
<li><p>更改脚本属性，改为可执行属性，例如：<code>chmod a+x scripts.sh</code>，然后直接<code>./scripts.sh</code>运行脚本；</p>
</li>
<li><p>以sh命令来执行脚本的内容，例如：<code>sh scripts.sh</code>，或者<code>. ./script.sh</code>；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % . ./script_study.sh</span><br><span class="line">Programme Starts Here</span><br><span class="line">......</span><br><span class="line">Programme Ends Here.</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>交互式脚本read</strong>：Shell下最简单的交互式命令read。&#x3D;&#x3D;(p328)&#x3D;&#x3D;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % read wname  # 用read命令给wname赋值</span><br><span class="line">sdyzzy</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % echo $wname  </span><br><span class="line">sdyzzy</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>脚本参数传递</strong>：使用位置参数，数字多于一位用{}括起来（例如${10}）；&#x3D;&#x3D;(p399)&#x3D;&#x3D;</p>
<ul>
<li>$0：脚本的文件名；<br>$1：第一个附加参数；<br>$2：第二个附加参数；<br>$n：……</li>
<li>输入的参数多于脚本需要的时，只传入需要的位置；</li>
<li>输入的参数少于脚本需要的时，传入对应位置的；</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % vim script_para.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">This program will define parameters</span></span><br><span class="line">echo &quot;This script&#x27;s name is $0&quot;</span><br><span class="line">echo &quot;parameters is $1 $2 $3&quot;</span><br><span class="line"></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % sh script_para.sh  # 不输入参数</span><br><span class="line">This script&#x27;s name is script_para.sh</span><br><span class="line">parameters is   </span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % sh script_para.sh a b  # 两个参数</span><br><span class="line">This script&#x27;s name is script_para.sh</span><br><span class="line">parameters is a b </span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % sh script_para.sh a b c d  # 多余的参数</span><br><span class="line">This script&#x27;s name is script_para.sh</span><br><span class="line">parameters is a b c</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>同名传递：</strong>相同名称的变量在主程序和函数里面都代表同一个变量。（区别export是全局变量，可以在不同脚本里面用；而这里只是同一个脚本）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % vim f1.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">.........</span></span><br><span class="line">function say()</span><br><span class="line">&#123;</span><br><span class="line">echo $a</span><br><span class="line">&#125;</span><br><span class="line">a=1234</span><br><span class="line">say</span><br><span class="line">a=ustc</span><br><span class="line">say</span><br><span class="line"></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % sh f1.sh</span><br><span class="line">1234</span><br><span class="line">ustc</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="5-Shell脚本语法"><a href="#5-Shell脚本语法" class="headerlink" title="5.Shell脚本语法"></a>5.Shell脚本语法</h3><ul>
<li><p>变量命名规则：&#x3D;&#x3D;(p318)&#x3D;&#x3D;</p>
<ul>
<li>变量与变量之间以等号<code>=</code>来连接，并且<strong>等号两边不能直接接空格符</strong>；</li>
<li>变量名称只能是英文字母与数字，但是数字不能做为开头字符（数字开头的是位置参数）；</li>
<li>若有空格符，可以使用双引号<code>“</code>或单引号<code>‘</code>来将变量内容结合起来</li>
<li><strong>注意：双引号内的特殊字符可以保有变量特性，但是单引号内的特殊字符则仅为一般字符</strong>；</li>
<li>必要时需要以字符\来将特殊字符（如：Enter , $ , \ , 空格符 , ‘等）变成一般字符；</li>
<li>若该变量需要在其他子程序中起作用，需要以<code>export</code>来使变量生效，如：<code>export PATH</code>；</li>
<li>通常，大写字母的变量为系统的预设变量，自定义变量使用小写字母；</li>
</ul>
<ul>
<li><p><strong>双引号</strong><code>&quot;&quot;</code>：内部的特殊字符(如<code>$</code>)可以保留原有性质（例如用<code>$</code>保留变量特性，即如果内部有变量，则可以直接输出变量值，还可以运算加减乘除）;</p>
<p><strong>单引号</strong><code>&#39;&#39;</code>：全部当作<strong>普通字符串</strong>输出；</p>
<p><strong>前引号</strong>``或者<code>$()</code>：输出<strong>命令</strong>运行的结果；</p>
<p>反斜杠转义符<code>\</code>：将特殊字符（例如<code>ENTER</code>、<code>$</code>、<code>\</code>、<code>space</code>、<code>&quot;</code>等）变成一般字符；</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注意HOME是变量，<span class="built_in">ls</span>是命令</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo &quot;HOME&quot;</span><br><span class="line">HOME</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo &quot;$HOME&quot;</span><br><span class="line">/Users/sdyzzy</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo &#x27;$HOME&#x27;</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">HOME</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo &quot;ls&quot; </span><br><span class="line">ls</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo &#x27;ls&#x27;</span><br><span class="line">ls</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo `ls`</span><br><span class="line">Desktop Documents Downloads Library Movies Music Pictures Public gw opt </span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo &quot;check is not print, but $HOME yes&quot;</span><br><span class="line">check is not print, but /Users/sdyzzy yes</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>变量声明：</strong>&#x3D;&#x3D;(p328)&#x3D;&#x3D;</p>
<ul>
<li><p>在shell中，所有没有声明的<strong>变量默认是字符串形式</strong>；</p>
</li>
<li><p>声明变量使用declare指令：<code>delcare [-afir] var=...</code></p>
<ul>
<li><code>-a</code>：定义为数组array；</li>
<li><code>-f</code>：定义为函数function；</li>
<li><code>-i</code>：定义为整数integer；</li>
<li><code>-r</code>：定义为只读readonly（相当于定义了一个常量）；</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>变量引用：</strong><code>$变量名</code>，或者<code>$&#123;变量名&#125;</code>。变量名多于一个字符建议用后一种；</p>
<ul>
<li><code>echo 变量名</code>：打印字符串；</li>
<li><code>echo $&#123;变量名&#125;</code>：打印变量值，显示变量内容(每一个输出都要一个$)，空格一并打印；</li>
<li><code>export 变量名=变量值</code>：更改变量值，或定义环境变量(在env里面可以看见，相当于C里面的全局变量)；</li>
<li><code>export 变量名</code>：使变量成为环境变量，可以在其他程序使用；</li>
<li><code>unset 变量名</code>：释放变量。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % a=1</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % abc=&quot;hello&quot;</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % echo $abc</span><br><span class="line">hello</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % echo $a bc</span><br><span class="line">1 bc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">所有没有声明的变量都默认字符串形式，所以c就成为字符串形式(内容为<span class="variable">$a</span>*<span class="variable">$b</span>，即2*3)，而不会进行任何算术运算。</span> </span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % declare -i a=2</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % declare -i b=3</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % c=$a*$b  # 未声明c类型，默认字符串</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo $c</span><br><span class="line">2*3</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % declare -i c  # 声明c为整型</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % c=$a*$b     </span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro ~ % echo $c     </span><br><span class="line">6</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">另一个例子</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % cat script_var.sh  # 已经创建了一个脚本</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!This programme is used to <span class="string">&quot;declare&quot;</span> variables.</span></span><br><span class="line">number1=2*3+5*6</span><br><span class="line">declare -i number2=2*3+5*6</span><br><span class="line">echo &quot;$number1&quot;</span><br><span class="line">echo &quot;$number2&quot;</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % sh script_var.sh  </span><br><span class="line">2*3+5*6</span><br><span class="line">36</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">declare</span> –r var等价于<span class="built_in">readonly</span> var</span></span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % readonly num=5</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % echo $num</span><br><span class="line">5</span><br><span class="line">(base) sdyzzy@SDYZZY-MacBook-Pro study % num=6</span><br><span class="line">zsh: read-only variable: num</span><br></pre></td></tr></table></figure>
</li>
<li><p>数组：BASH<strong>只支持一维数组</strong>，但元素个数没有限制。</p>
<ul>
<li><p><strong>数组创建：</strong>有三种方法，<strong>不能乱加逗号！</strong>（linux<strong>下标从0开始</strong>，mac从1开始）</p>
<ul>
<li><code>array=(var0 var1 var2 var3 ... varN)</code></li>
<li><code>array=([0]=var0 [1]=var1 [2]=var2 ... [n]=varN)</code></li>
<li><code>array[0]=var1 arrya[1]=var2 ... array[n]=varN</code></li>
</ul>
</li>
<li><p><strong>引用数组元素：</strong><code>echo $&#123;array[n]&#125;</code></p>
</li>
<li><p><strong>计算数组元素个数：</strong> &#96;$</p>
</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://sdyzzy.github.io">SDYZZY</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://sdyzzy.github.io/posts/4b93c86f.html">https://sdyzzy.github.io/posts/4b93c86f.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://sdyzzy.github.io" target="_blank">SDYZZY的摸鱼网站</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/programming/">programming</a></div><div class="post_share"><div class="social-share" data-image="/posts/4b93c86f/linux.svg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/9c39120.html" title="Linux系统与天文软件包IDL（第一部分）"><img class="cover" src="/posts/9c39120/linux.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux系统与天文软件包IDL（第一部分）</div></div></a></div><div class="next-post pull-right"><a href="/posts/2eec1551.html" title="HTML"><img class="cover" src="/images/cover_and_topimage/cover_html.svg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">HTML</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%8E%8B%E7%BC%A9%E5%8C%85%E7%AE%A1%E7%90%86-%EF%BC%88p261%EF%BC%89"><span class="toc-text">12.压缩包管理&#x3D;&#x3D;（p261）&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86-p500"><span class="toc-text">13.任务管理&#x3D;&#x3D;(p500)&#x3D;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%C2%B7Shell%E8%84%9A%E6%9C%AC%E5%8F%8A%E5%BA%94%E7%94%A8"><span class="toc-text">第六章·Shell脚本及应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-vim%E7%AE%80%E4%BB%8B-p291"><span class="toc-text">1.vim简介&#x3D;&#x3D;(p291)&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Shell%E5%9F%BA%E7%A1%80%E8%AE%BE%E7%BD%AE"><span class="toc-text">2.Shell基础设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%91%BD%E4%BB%A4%E8%A1%A5%E5%85%85"><span class="toc-text">3.命令补充</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Shell%E8%84%9A%E6%9C%AC%E7%AE%80%E4%BB%8B"><span class="toc-text">4.Shell脚本简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">5.Shell脚本语法</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By SDYZZY</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to SDYZZY's <a target="_blank" rel="noopener" href="http://home.ustc.edu.cn/~sdyzzy/">blog</a>! Have a nice day!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script></div></body></html>